<div class="flex flex-row justify-around"> <!-- This is the start of the leaderboard row -->
  <div class="flex flex-col"> <!-- this starts the user-standings-table -->
    <div class="font-bold text-xl pb-4">
      <h1>Player and Driver Standings:</h1>
    </div>
    
    <table class="w-full text-md text-left text-black dark:text-white table-auto border-2 pt-4 border-collapse rounded-md border-spacing-5 shadow-md">
      <thead class="px-4 text-lg text-black uppercase bg-red-400 dark:bg-gray-700 dark:text-gray-400">
        <tr>
          <th class="pr-4">Position</th>
          <th class="pr-4">Player Name</th>
          <th>Points</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <% user.calculate_total_points %>
          <tr class="font-med <%= @position.even? ? 'bg-red-200 dark:bg-gray-600' : '' %>">
            <td class="pr-4 text-center"><%= @position %></td>
            <td class="pr-4 text-center"><%= user.name %></td>
            <td class="pl-1 text-center"><%= user.total_points %></td>
            <% @position += 1 %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div> <!-- this ends the user-standings-table -->


  <div class="flex felx-col">
    <% points_earned_by_driver = {} %>
    <% @drivers.each do |driver| %>
      <% points_earned_by_driver[driver.driver_id] = UserPick.where(driver_id_tenth: driver.driver_id).sum { |pick| pick.points_earned } %>
    <% end %>
    <% @drivers.sort_by! { |driver| -points_earned_by_driver[driver.driver_id]} %>

    <table class="w-full text-sm text-left mt-12 text-black dark:text-white table-auto border-2 p-4 border-collapse rounded-md my-5 shadow-md">
      <thead class="text-xl text-black uppercase bg-red-400 dark:bg-gray-700 dark:text-gray-400">
        <tr>
          <th class="pr-4 text-center">Position</th>
          <th class="pr-2 text-center">Driver</th>
          <th class="pr-2 text-center">Points earned when picked</th>
        </tr>
      </thead>
      <tbody>
      <% @position = 1 %>
        <% @drivers.each do |driver| %>
          <tr class="text-lg <%= @position.even? ? 'bg-red-200 dark:bg-gray-600' : '' %>">
            <td class="pr-4 text-center"><%= @position %></td>
            <td class="pr-2 text-center"><%= driver.name %></td>
            <td class=" text-center"><%= points_earned_by_driver[driver.driver_id] %> </td>
            <% @position += 1 %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div><!-- this ends the driver p10 points table -->
</div> <!-- this ends the leaderboard row -->